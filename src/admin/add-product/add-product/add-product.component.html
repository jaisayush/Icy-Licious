
<!-- Added all fields for adding the products
    Basic validation are done
-->

<div class="add-container">
    
    <form [formGroup]="createForm" (ngSubmit)="create()" enctype="multipart/form-data">
        
        <div class="field">
            <label class="label">Product ID</label>
            <div class="control">
              <input [class.is-invalid]="productId.invalid 
              && productId.touched" class="input is-small form-control" formControlName="productId" type="text" placeholder="ID">
            </div>
            <div *ngIf="productId.invalid && productId.touched">
                <small *ngIf="productId.errors?.required" class="text-danger"><i>Product ID is required</i></small>
                <small *ngIf="productId.errors?.minlength || productId.errors?.maxlength" class="text-danger"><i>Product ID should be 4-6 characters</i></small>
            </div>
          </div>

          <div class="field">
            <label class="label">Product Name</label>
            <div class="control" >
              <input [class.is-invalid]="productName.invalid 
              && productName.touched" class="input is-small form-control" type="text" placeholder="Name" formControlName="productName">
            </div>
            <div *ngIf="productName.invalid && productName.touched">
                <small *ngIf="productName.errors?.required" class="text-danger"><i>Product Name is required</i></small>
                <small *ngIf="productName.errors?.minlength || productId.errors?.maxlength" class="text-danger">Product ID should be 4-30 characters</small>
            </div>
          </div>
        
    
          <div class="field">
            <label class="label">Type</label>
            <div class="control">
              <div class="select is-small">
                <select [class.is-invalid]="type.invalid 
                && type.touched" class=" form-control" formControlName="type">
                  <option value="" disabled>Select Type</option>
                  <option value="classic">Classic</option>
                  <option value="special">Special</option>
                </select>
              </div>
            </div>
            <div *ngIf="type.invalid && type.touched">
                <small *ngIf="type.errors?.required" class="text-danger"><i>Product Type is required</i></small>
            </div>
          </div>
    
          <div class="field">
            <label class="label">Price</label>
            <div class="control">
              <input [class.is-invalid]="price.invalid 
              && price.touched"  class="input is-small form-control" formControlName="price" type="number" placeholder="Price">
            </div>
            <div *ngIf="price.invalid && price.touched">
                <small *ngIf="price.errors?.required" class="text-danger"><i>Product Price is required</i></small>
                <small *ngIf="price.errors?.min" class="text-danger"><i>Minimum price will be 1</i></small>
            </div>
          </div>
          
          <div class="field">
            <label class="label">Description</label>
            <div class="control">
              <textarea [class.is-invalid]="description.invalid 
              && description.touched" class="textarea form-control is-small" rows="2" formControlName="description"  placeholder="Enter product description"></textarea>
            </div>
            <div *ngIf="description.invalid && description.touched">
                <small *ngIf="description.errors?.required" class="text-danger"><i>Description is required</i> </small>
                <small *ngIf="description.errors?.minlength || description.errors?.maxlength" class="text-danger">Description should be 10-100 characters</small>
            </div>
          </div>
          
          <div class="field">
            <label class="label">Start date</label>
            <div class="control">
              <input [class.is-invalid]="startDate.invalid 
              && startDate.touched" class="input is-small form-control" formControlName="startDate" type="date" useValueAsDate/>
            </div>
            <div *ngIf="startDate.invalid && startDate.touched">
                <small *ngIf="startDate.errors?.required" class="text-danger"><i>Start Date is required</i></small>
            </div>
          </div>
    
          <div class="field">
            <label class="label">End date</label>
            <div class="control">
              <input [class.is-invalid]="endDate.invalid 
              && endDate.touched" class="input is-small form-control" formControlName="endDate" type="date" useValueAsDate/>
            </div>
            <div *ngIf="endDate.invalid && endDate.touched">
                <small *ngIf="endDate.errors?.required" class="text-danger"><i>End Date is required</i></small>
        
            </div>
              <small *ngIf="createForm.errors" class="text-danger"><i>{{createForm.errors?.dates | json}}</i></small>
          </div>
    
          <div class="field">
            <label class="label">Product Image</label>
            <div class="file is-info has-name is-small">
              <label class="file-label">
                <input  class="file-input form-control" accept=".jpg,.png,.jpeg" (change)="onFileSelected($event)" formControlName="fileSource"  type="file" name="image" />
                <span class="file-cta">
                  <span class="file-icon">
                    <i class="fas fa-upload"></i>
                  </span>
                  <span class="file-label">
                    Upload
                  </span>
                </span>
              </label>
              <small class="text-danger" >*files allowed jpeg, png</small>
            </div>
            <p id="show-file-name"></p>
            <!-- <div *ngIf="image.invalid && image.touched">
                <small *ngIf="image.errors?.required" class="text-danger"><i>Image is required</i></small>
            </div> -->
          </div>
          
          <div class="field is-grouped">
              <button [disabled]="!createForm.valid" type="submit" class="button is-link">Create</button>
        </div>
    </form>
    
</div>